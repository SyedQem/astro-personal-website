---
import Layout from "../../layouts/Layout.astro";
import { getCollection, render, type CollectionEntry } from "astro:content";

export async function getStaticPaths() {
  const projects = await getCollection("projects");

  return projects.map((p) => ({
    params: { slug: p.slug },
    props: { project: p },
  }));
}

const { project } = Astro.props as { project: CollectionEntry<"projects"> };
const { Content } = await render(project);
---




<Layout>
  <main class="relative z-10 px-6 py-20">
    <article class="max-w-3xl mx-auto">
      <header class="mb-8">

        <a
        href="/projects"
        class="inline-block text-sm text-gray-400 hover:text-gray-200"
        >
        ← Back to projects
        </a>


        <h1 class="text-4xl font-bold">{project.data.title}</h1>
        <p class="mt-3 text-gray-300">{project.data.description}</p>

        <div class="mt-5 flex flex-wrap gap-2">
            {project.data.stack.map((t: string) => <span class="pill">{t}</span>)}

        </div>

        <div class="mt-6 flex gap-5">
          {project.data.repo && (
            <a
              href={project.data.repo}
              target="_blank"
              rel="noopener noreferrer"
              class="text-sm text-emerald-400 hover:text-emerald-300"
            >
              View repository →
            </a>
          )}
          {project.data.demo && (
            <a
              href={project.data.demo}
              target="_blank"
              rel="noopener noreferrer"
              class="text-sm text-emerald-400 hover:text-emerald-300"
            >
              Live demo →
            </a>
          )}
        </div>
      </header>

      <div class="prose prose-invert max-w-none">
        <Content />
      </div>
    </article>
  </main>
</Layout>
